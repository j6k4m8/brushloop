# BrushLoop MVP Task List

- [x] Task 1: Initialize monorepo structure, workspace tooling, and top-level docs/scripts.
- [x] Task 2: Implement shared contracts package for domain models and protocol payloads.
- [x] Task 3: Implement Node.js + TypeScript backend (REST API, auth, contacts, artworks, turns).
- [x] Task 4: Implement WebSocket collaboration and CRDT operation flow with persistence.
- [x] Task 5: Implement SQLite schema, repositories, snapshots, and notification dispatch pipeline.
- [x] Task 6: Implement Flutter app skeleton with auth, home, artwork list/detail, and drawing UI scaffolding.
- [x] Task 7: Add tests and lint/format checks across server and shared packages.
- [x] Task 8: Write deployment + developer documentation and verify end-to-end commands.
- [x] Task 9: Implement production-grade media storage abstraction, metadata persistence, and upload/download API.
- [x] Task 10: Implement real Flutter camera/gallery flows with media upload wired into artwork creation.
- [x] Task 11: Fix platform network permissions/config so sign-in works on macOS/iOS/Android.
- [x] Task 12: Allow solo artwork creation without requiring invites/contacts.
- [x] Task 13: Convert eraser to true brush-style erase and keep undo/redo behavior correct.
- [x] Task 14: Add pending invites UI and accept/deny flow from buddy list.
- [x] Task 15: Fix eraser rendering so it clears pixels reliably without black/off-white artifacts.
- [x] Task 16: Add multi-layer creation and make eraser compositing correct per layer.
- [x] Task 17: Isolate per-layer rendering so eraser cannot affect layers below.
- [x] Task 18: Fix eraser black/flicker artifacts while preserving per-layer isolation.
- [x] Task 19: Replace unstable eraser compositing path causing black/flicker viewport regression.
- [x] Task 20: Improve layer list ordering and compactness in artwork controls.
- [x] Task 21: Apply websocket operation sync so drawings persist and propagate across users.
- [x] Task 22: Redesign the Flutter app UI into a Photoshop-style studio interface across all screens.
- [x] Task 23: Optimize editor screen real estate with workspace-first layout and mobile floating panes.
- [x] Task 24: Replace editor tools with top control strip and full color picker dialog.
- [x] Task 25: Add visual package-based color picker and eyedropper tool to editor.
- [x] Task 26: Add pan/zoom navigation tool and fit-to-viewport canvas behavior.
- [x] Task 27: Support pinch-to-resize brush while using brush or eraser tools.
- [x] Task 28: Fix Flutter gesture recognizer conflict by using a single scale-based canvas gesture pipeline.
- [x] Task 29: Add live phantom brush-size preview during slider and pinch resizing.
- [x] Task 30: Add turn-based first-turn chooser and waiting-user submit-turn indicator.
- [x] Task 31: Add artwork rename flows and collaboration descriptor labels in list/editor header.
- [x] Task 32: Add contact chat workspace with inline artwork events and prioritize my-turn artworks.
- [x] Task 33: Fix artwork header title-edit button alignment.
- [x] Task 34: Add chat gap timestamps and unread indicators for contact chats.
- [x] Task 35: Add settings page with display-name update and move logout from home toolbar.
- [x] Task 36: Add "New artwork with {username}" action in chat shared artworks pane with prepopulated contact flow.
- [x] Task 37: Harden media picker behavior across platforms (camera capability guardrails, gallery timeout/errors, shared picker utility).
- [ ] Task 38: Add image import + object select workflow (alpha-preserving image layers with move/scale/rotate transforms).
- [x] Task 39: Fix gallery picker hang on desktop/macOS with robust platform-specific picker and entitlements.
- [x] Task 40: Fix create-artwork contact dropdown crash by using stable contact IDs and deduped contact options.
- [x] Task 41: Fix canvas repaint consistency so realtime operations and undo render immediately across clients.
- [x] Task 42: Implement collaborative undo/redo sync by broadcasting stroke remove/add operations over websocket.
- [x] Task 43: Restrict undo/redo to current user's strokes only in collaborative sessions.
- [x] Task 44: Persist authenticated sessions across app restarts and browser refresh with startup restore.
- [x] Task 45: Fix dev shutdown deadlocks and listener leaks by making signal handling idempotent and closing active sockets on stop.
- [x] Task 46: Add adapted GitHub Actions workflows for PR checks, multi-platform tagged releases, and Pages deployment.
- [x] Task 47: Build a polished static website with screenshot placeholders for GitHub Pages deployment.
- [x] Task 48: Add Docker + Compose deployment with persistent SQLite/media mounts and domain-based web/api routing.
- [x] Task 49: Serve Flutter web build at web domain and centralize domains into a single deployment config file.
- [x] Task 50: Add Dockerized Flutter web build step to deployment so host nodes do not need Flutter installed.
- [x] Task 51: Build and publish deployable API/edge images to GHCR and switch deployment to pull prebuilt containers.
- [x] Task 52: Rename app identifiers to com.matelsky.brushloop and update app display names from default "app".
- [x] Task 53: Default app API base URL to deployed production endpoint while preserving dart-define override behavior.
- [x] Task 54: Fix turn-based realtime desync by hardening WebSocket send failure handling and preventing broadcast aborts.
- [x] Task 55: Fix base-photo rendering by supporting tokenized media URLs for mobile/web image loading.
- [x] Task 56: Support single-tap dot strokes in brush mode without requiring drag input.
- [x] Task 57: Increase maximum brush size to 2x current range while keeping minimum size unchanged.
